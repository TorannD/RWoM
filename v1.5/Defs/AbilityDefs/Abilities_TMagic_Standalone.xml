<?xml version="1.0" encoding="utf-8" ?>

<Defs>

<ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
   <thingClass>AbilityUser.Projectile_Ability</thingClass>
   <defName>Projectile_TM_SpawnThing</defName>
   <label>spawn magical item</label>
   <graphicData>
		<texPath>Spells/invis</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<shaderType>TransparentPostLight</shaderType>
	</graphicData>
   <projectile>
		<flyOverhead>true</flyOverhead>
		<damageDef>Burn</damageDef>
		<damageAmountBase>0</damageAmountBase>
		<speed>1000</speed>
   </projectile>   
 </ThingDef>
 
<!--  Heater -->

<ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
   <thingClass>TorannMagic.Projectile_Heater</thingClass>
   <defName>Projectile_Heater</defName>
   <label>spawn magic heater</label>
   <graphicData>
		<texPath>Spells/invis</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<shaderType>TransparentPostLight</shaderType>
	</graphicData>
   <projectile>
		<flyOverhead>true</flyOverhead>
		<damageDef>Burn</damageDef>
		<damageAmountBase>0</damageAmountBase>
		<speed>999</speed>
   </projectile>   
 </ThingDef>

 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_Heater</defName>
    <label>Magical heater</label>
    <uiIconPath>UI/heater</uiIconPath>
    <description>Creates a dimensional pocket that taps into the Plane of Fire, generating constant heat in a confined area. The heater must be sustained by the mage - reduces max mana by 25 while active.</description>
    <manaCost>0.25</manaCost>
	<learnItem>SpellOf_Heater</learnItem>
	<upkeepEnergyCost>.25</upkeepEnergyCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_SB</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Heater</defaultProjectile>
		<abilityDef>TM_Heater</abilityDef>
        <warmupTime>5</warmupTime>
        <SecondsToRecharge>60</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>20</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>		
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_DismissHeater</defName>
    <label>Dismiss Heater</label>
    <uiIconPath>UI/dismissheater</uiIconPath>
    <description>Dismisses a magical heater</description>
    <manaCost>0.0</manaCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_DismissHeater</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>TM_Paladin_Heal</defaultProjectile>
		<abilityDef>TM_DismissHeater</abilityDef>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>4</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>0</range>
		<isViolent>false</isViolent>
        <soundCast>Message_PositiveEvent</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
        <isPrimary>false</isPrimary>
		<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		<targetParams>
      	 <canTargetPawns>true</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>true</canTargetSelf>
		 <canTargetLocations>false</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <!--  Cooler -->
 
 <ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
   <thingClass>TorannMagic.Projectile_Cooler</thingClass>
   <defName>Projectile_Cooler</defName>
   <label>spawn magic cooler</label>
   <graphicData>
		<texPath>Spells/invis</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<shaderType>TransparentPostLight</shaderType>
	</graphicData>
   <projectile>
		<flyOverhead>true</flyOverhead>
		<damageDef>Burn</damageDef>
		<damageAmountBase>0</damageAmountBase>
		<speed>999</speed>
   </projectile>   
 </ThingDef>
 
  <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_Cooler</defName>
    <label>Magical cooler</label>
    <uiIconPath>Other/cooler</uiIconPath>
    <description>Creates a dimensional pocket that taps into the Plane of Ice, reducing heat in a confined area. The cooler must be sustained by the mage - reduces max mana by 25 while active.</description>
    <manaCost>0.25</manaCost>
	<learnItem>SpellOf_Cooler</learnItem>
	<upkeepEnergyCost>.25</upkeepEnergyCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_SB</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Cooler</defaultProjectile>
		<abilityDef>TM_Cooler</abilityDef>
        <warmupTime>5</warmupTime>
        <SecondsToRecharge>60</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>20</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_DismissCooler</defName>
    <label>Dismiss Cooler</label>
    <uiIconPath>UI/dismisscooler</uiIconPath>
    <description>Dismisses a magical cooler</description>
    <manaCost>0.0</manaCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_DismissCooler</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>TM_Paladin_Heal</defaultProjectile>
		<abilityDef>TM_DismissCooler</abilityDef>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>4</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>0</range>
		<isViolent>false</isViolent>
        <soundCast>Message_PositiveEvent</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
        <isPrimary>false</isPrimary>
		<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		<targetParams>
      	 <canTargetPawns>true</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>true</canTargetSelf>
		 <canTargetLocations>false</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
  <!--  Power Node --> 
  
  <ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
   <thingClass>TorannMagic.Projectile_PowerNode</thingClass>
   <defName>Projectile_PowerNode</defName>
   <label>spawn arcane power node</label>
   <graphicData>
		<texPath>Spells/invis</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<shaderType>TransparentPostLight</shaderType>
	</graphicData>
   <projectile>
		<flyOverhead>true</flyOverhead>
		<damageDef>Burn</damageDef>
		<damageAmountBase>0</damageAmountBase>
		<speed>999</speed>
   </projectile>   
 </ThingDef>
 
  <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_PowerNode</defName>
    <label>Arcane Power Node</label>
    <uiIconPath>Other/energynode_1</uiIconPath>
    <description>Creates an energy node that slowly releases arcane energy in the form of electricity. Can be used as a power source. The power node must be sustained by the mage - reduces max mana by 25 and mana regen by 25% while active.</description>
    <manaCost>0.25</manaCost>
	<learnItem>SpellOf_PowerNode</learnItem>
	<upkeepEnergyCost>.25</upkeepEnergyCost>
	<upkeepRegenCost>.25</upkeepRegenCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_SB</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_PowerNode</defaultProjectile>
		<abilityDef>TM_PowerNode</abilityDef>
        <warmupTime>5</warmupTime>
        <SecondsToRecharge>60</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>20</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_DismissPowerNode</defName>
    <label>Dismiss Power Node</label>
    <uiIconPath>UI/dismissenergynode</uiIconPath>
    <description>Dismisses an arcane power node</description>
    <manaCost>0.0</manaCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_DismissPowerNode</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>TM_Paladin_Heal</defaultProjectile>
		<abilityDef>TM_DismissPowerNode</abilityDef>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>4</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>0</range>
		<isViolent>false</isViolent>
        <soundCast>Message_PositiveEvent</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
        <isPrimary>false</isPrimary>
		<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		<targetParams>
      	 <canTargetPawns>true</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>true</canTargetSelf>
		 <canTargetLocations>false</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
<!--  Light Node -->

<ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
   <thingClass>TorannMagic.Projectile_Sunlight</thingClass>
   <defName>Projectile_Sunlight</defName>
   <label>spawn magic light</label>
   <graphicData>
		<texPath>Spells/invis</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<shaderType>TransparentPostLight</shaderType>
	</graphicData>
   <projectile>
		<flyOverhead>true</flyOverhead>
		<damageDef>Burn</damageDef>
		<damageAmountBase>0</damageAmountBase>
		<speed>1000</speed>
		<explosionRadius>5.8</explosionRadius>
		<postExplosionSpawnChance>1</postExplosionSpawnChance>
   </projectile>   
 </ThingDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_Sunlight</defName>
    <label>Sun Light</label>
    <uiIconPath>UI/sunlight</uiIconPath>	
    <description>Creates a beacon of sunlight strong enough to grow plants. The beacon must be sustained by the mage - reduces max mana by 40 and mana regeneration by 40% while active.</description>
    <manaCost>0.40</manaCost>
	<learnItem>SpellOf_Sunlight</learnItem>
	<upkeepEnergyCost>.4</upkeepEnergyCost>
	<upkeepRegenCost>.4</upkeepRegenCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_SB</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Sunlight</defaultProjectile>
		<abilityDef>TM_Sunlight</abilityDef>
        <warmupTime>5</warmupTime>
        <SecondsToRecharge>60</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>20</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>		
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_DismissSunlight</defName>
    <label>Dismiss Sun Light</label>
    <uiIconPath>UI/dismisssunlight</uiIconPath>
    <description>Dismisses a Sun Light</description>
    <manaCost>0.0</manaCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_DismissSunlight</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>TM_Paladin_Heal</defaultProjectile>
		<abilityDef>TM_DismissSunlight</abilityDef>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>4</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>0</range>
		<isViolent>false</isViolent>
        <soundCast>Message_PositiveEvent</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
        <isPrimary>false</isPrimary>
		<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		<targetParams>
      	 <canTargetPawns>true</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>true</canTargetSelf>
		 <canTargetLocations>false</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <!--  Remove Moisture  -->
 <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_DryGround</thingClass>
	    <defName>Projectile_DryGround</defName>
        <label>dry ground</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>Bomb</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>200</speed>
			<explosionRadius>1.5</explosionRadius>
			<postExplosionSpawnChance>0</postExplosionSpawnChance>
        </projectile>
    </ThingDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_DryGround</defName>
    <label>Dry Ground</label>
    <uiIconPath>UI/dryground</uiIconPath>
    <description>Infuses the ground with heat, evaporating most of the moisture from a patch of ground. Only works on muddy ground.</description>
    <manaCost>0.60</manaCost>
	<learnItem>SpellOf_DryGround</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_BLOS</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_DryGround</defaultProjectile>
		<abilityDef>TM_DryGround</abilityDef>
        <warmupTime>1.5</warmupTime>
        <SecondsToRecharge>1.5</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>12</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
  <!--  Add Moisture  -->
 <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_WetGround</thingClass>
	    <defName>Projectile_WetGround</defName>
        <label>moisturize ground</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>Bomb</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>200</speed>
			<explosionRadius>1.5</explosionRadius>
			<postExplosionSpawnChance>0</postExplosionSpawnChance>
        </projectile>
    </ThingDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_WetGround</defName>
    <label>Moisturize Ground</label>
    <uiIconPath>UI/wetground</uiIconPath>
    <description>Infuses sand with water, creating usable soil.</description>
    <manaCost>0.60</manaCost>
	<learnItem>SpellOf_WetGround</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_BLOS</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_WetGround</defaultProjectile>
		<abilityDef>TM_WetGround</abilityDef>
        <warmupTime>1.5</warmupTime>
        <SecondsToRecharge>1.5</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>12</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
  <!--  Charge Battery  -->
 <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_ChargeBattery</thingClass>
	    <defName>Projectile_ChargeBattery</defName>
        <label>charge battery</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>Bomb</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>200</speed>
        </projectile>
    </ThingDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_ChargeBattery</defName>
    <label>Charge Battery</label>
    <uiIconPath>UI/chargebattery</uiIconPath>
    <description>Converts raw magic power into electrical energy. This spell can only be used on batteries or golems. Generates 400Wd.</description>
    <manaCost>0.10</manaCost>
	<learnItem>SpellOf_ChargeBattery</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_SB</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_ChargeBattery</defaultProjectile>
		<abilityDef>TM_ChargeBattery</abilityDef>
        <warmupTime>3</warmupTime>
        <SecondsToRecharge>5</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>12</range>
		<isViolent>false</isViolent>
        <soundCast>Power_OnSmall</soundCast>
        <muzzleFlashScale>200</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <!-- Smoke Cloud -->	
    <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_SmokeCloud</thingClass>
	    <defName>Projectile_SmokeCloud</defName>
        <label>smoke cloud</label>
        <graphicData>
			<texPath>Spells/smokecloud</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>Smoke</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>45</speed>
			<explosionRadius>5</explosionRadius>
			<postExplosionSpawnChance>1</postExplosionSpawnChance>
        </projectile>
    </ThingDef>

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_SmokeCloud</defName>
        <label>Smoke Cloud</label>
        <uiIconPath>UI/smokecloud</uiIconPath>
        <description>Draws in and ignites water and dirt particles in the air to create a smoke screen that temporarily conceals the area.</description>
        <manaCost>0.06</manaCost>
		<learnItem>SpellOf_SmokeCloud</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_SB</verbClass>
				<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_SmokeCloud</defaultProjectile>
            <abilityDef>TM_SmokeCloud</abilityDef>
            <warmupTime>.3</warmupTime>
            <SecondsToRecharge>12</SecondsToRecharge>
            <range>45</range>
            <burstShotCount>1</burstShotCount>
			<forcedMissRadius>2</forcedMissRadius>
            <soundCast>DropPod_Leaving</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>true</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

    <!-- smoke cloud end-->
	
	<!-- Extinguish -->	
    <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_Extinguish</thingClass>
	    <defName>Projectile_Extinguish</defName>
        <label>extinguish</label>
        <graphicData>
			<texPath>Spells/extinguish</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>Extinguish</damageDef>
            <damageAmountBase>1000</damageAmountBase>
            <speed>45</speed>
			<explosionRadius>5</explosionRadius>
			<postExplosionSpawnChance>1</postExplosionSpawnChance>
        </projectile>
    </ThingDef>

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_Extinguish</defName>
        <label>Extinguish</label>
        <uiIconPath>UI/Extinguish</uiIconPath>
        <description>Removes the fire element from the target location, instantly extinguishing undesired fires.</description>
        <manaCost>0.07</manaCost>
		<learnItem>SpellOf_Extinguish</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_SB</verbClass>
				<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_Extinguish</defaultProjectile>
            <abilityDef>TM_Extinguish</abilityDef>
            <warmupTime>.6</warmupTime>
            <SecondsToRecharge>25</SecondsToRecharge>
            <range>35</range>
            <burstShotCount>1</burstShotCount>
			<forcedMissRadius>2</forcedMissRadius>
            <soundCast>DropPod_Leaving</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>true</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

    <!-- extinguish end-->
	
		<!-- EMP -->	
    <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_EMP</thingClass>
	    <defName>Projectile_EMP</defName>
        <label>EMP</label>
        <graphicData>
			<texPath>Spells/EMP</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>EMP</damageDef>
            <damageAmountBase>100</damageAmountBase>
            <speed>40</speed>
			<explosionRadius>7</explosionRadius>
			<postExplosionSpawnChance>1</postExplosionSpawnChance>
        </projectile>
    </ThingDef>

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_EMP</defName>
        <label>EMP</label>
        <uiIconPath>UI/EMP</uiIconPath>
        <description>Generate a burst of electromagnetic radiation at a target site, disabling mechanoids for a short period.</description>
        <manaCost>0.20</manaCost>
		<learnItem>SpellOf_EMP</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_SB</verbClass>
				<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_EMP</defaultProjectile>
            <abilityDef>TM_EMP</abilityDef>
            <warmupTime>1.3</warmupTime>
            <SecondsToRecharge>45</SecondsToRecharge>
            <range>35</range>
            <burstShotCount>1</burstShotCount>
			<forcedMissRadius>2</forcedMissRadius>
            <soundCast>DropPod_Leaving</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>true</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

    <!-- emp end-->
	
			<!-- Transfer mana -->	
    <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_TransferMana</thingClass>
	    <defName>Projectile_TransferMana</defName>
        <label>transfer mana</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>EMP</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>999</speed>
        </projectile>
    </ThingDef>

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_TransferMana</defName>
        <label>Transfer Mana</label>
        <uiIconPath>UI/transfermana</uiIconPath>
        <description>Transfers magical energy from one caster to another. Recipients that are not magic users will receive significant, if random, physical augmentation for a short period. Can be harmful, even lethal, at extreme levels.</description>
        <manaCost>0.30</manaCost>
		<learnItem>SpellOf_TransferMana</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_BLOS</verbClass>
				<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_TransferMana</defaultProjectile>
            <abilityDef>TM_TransferMana</abilityDef>
            <warmupTime>1.3</warmupTime>
            <SecondsToRecharge>15</SecondsToRecharge>
            <range>35</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>ThrowGrenade</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

    <!-- transfer mana end-->
	
				<!-- siphon mana -->	
    <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>TorannMagic.Projectile_SiphonMana</thingClass>
	    <defName>Projectile_SiphonMana</defName>
        <label>siphon mana</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
			<flyOverhead>true</flyOverhead>
            <damageDef>EMP</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>999</speed>
        </projectile>
    </ThingDef>

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_SiphonMana</defName>
        <label>Siphon Mana</label>
        <uiIconPath>UI/siphonmana</uiIconPath>
        <description>Siphons magical energy from another caster. Recipients that are not magic users will have physical capacities drained instead. Can be lethal if too much life force is drained.</description>
        <manaCost>0.10</manaCost>
		<learnItem>SpellOf_SiphonMana</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_BLOS</verbClass>
				<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_SiphonMana</defaultProjectile>
            <abilityDef>TM_SiphonMana</abilityDef>
            <warmupTime>1.3</warmupTime>
            <SecondsToRecharge>25</SecondsToRecharge>
            <range>40</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>ThrowGrenade</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

    <!-- siphon mana end-->
	
	<!-- mana shield -->	

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_ManaShield</defName>
        <label>Mana Shield</label>
        <uiIconPath>UI/manashield</uiIconPath>
        <description>Summons a protective barrier that draws power from the caster's mana. Damage absorption rate is 1dmg to 1 mana. The barrier breaks when the caster has insufficient mana to absorb an attack.  

Casting the spell when a barrier is active will remove the barrier. Can be used in conjunction with shield belts. Does not impede spell casting of any type.</description>
        <manaCost>0.005</manaCost>
		<learnItem>SpellOf_ManaShield</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_ManaShield</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_TM_SpawnThing</defaultProjectile>
            <abilityDef>TM_ManaShield</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>10</SecondsToRecharge>
            <range>0</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>ThrowGrenade</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

    <!-- mana shield end-->
	
	<!-- summoned wall -->
	
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_ArcaneBarrier</defName>
    <label>Arcane Barrier</label>
    <uiIconPath>UI/arcanebarrier</uiIconPath>
    <description>Creates an arcane barrier at the target location that is horizontal to the caster. The barrier lasts 60 seconds.</description>
    <manaCost>0.0</manaCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Weapon.Verb_ArcaneBarrier</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_TM_SpawnThing</defaultProjectile>
		<abilityDef>TM_ArcaneBarrier</abilityDef>
        <warmupTime>3</warmupTime>
        <SecondsToRecharge>80</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>50</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <targetParams>
      	 <canTargetPawns>false</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>false</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>		
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
   	    <!-- Flight -->
		
	<ThingDef ParentName="BaseBullet" Name="FlyingObject_Flight">
	   <defName>FlyingObject_Flight</defName>
	   <thingClass>TorannMagic.FlyingObject_Flight</thingClass>
	   <label>flying object</label>
	   <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
	   <projectile>
			<flyOverhead>true</flyOverhead>
			<damageDef>Stun</damageDef>
			<damageAmountBase>0</damageAmountBase>
			<speed>250</speed>
	   </projectile>
	</ThingDef>
			
	<ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
        <thingClass>AbilityUser.Projectile_Ability</thingClass>
		<defName>Projectile_Flight</defName>
        <label>flight</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
            <flyOverhead>true</flyOverhead>
            <damageDef>TM_Holy</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>70</speed>
        </projectile>
    </ThingDef>

 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_Flight</defName>
        <label>Flight</label>
        <uiIconPath>UI/wraithflight</uiIconPath>
        <description>Quickly fly to a target location.</description>
        <manaCost>0.10</manaCost>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Effect_Flight</verbClass>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_Flight</defaultProjectile>
            <abilityDef>TM_Flight</abilityDef>
            <AbilityTargetCategory>TargetLocation</AbilityTargetCategory>
            <targetParams>
                <canTargetPawns>false</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
            <warmupTime>0.5</warmupTime>
            <SecondsToRecharge>180.0</SecondsToRecharge>
            <range>120</range>
			<isViolent>false</isViolent>
            <burstShotCount>1</burstShotCount>
            <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
            <soundCast>TM_AirWoosh</soundCast>
            <muzzleFlashScale>0</muzzleFlashScale>
            <isPrimary>false</isPrimary>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- Fertile land -->	
	
	<ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
        <thingClass>TorannMagic.Projectile_FertileLands</thingClass>
		<defName>Projectile_FertileLands</defName>
        <label>fertile lands</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
            <flyOverhead>true</flyOverhead>
            <damageDef>TM_Holy</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>999</speed>
			<explosionRadius>6</explosionRadius>
			<postExplosionSpawnChance>1</postExplosionSpawnChance>
        </projectile>
    </ThingDef>

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_FertileLands</defName>
        <label>Fertile Lands</label>
        <uiIconPath>UI/blessland</uiIconPath>
        <description>Infuses an area of land with power from the druid that increases its fertility. This ability must be maintained and reduces mana regeneration by 40%. The druid is limited to one area.</description>
        <manaCost>0.10</manaCost>
		<learnItem>SpellOf_FertileLands</learnItem>
		<upkeepRegenCost>.4</upkeepRegenCost>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_SB</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_FertileLands</defaultProjectile>
            <abilityDef>TM_FertileLands</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>10</SecondsToRecharge>
            <range>40</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_VibrationLow</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetLocation</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>false</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_DismissFertileLands</defName>
        <label>End Fertile Lands</label>
        <uiIconPath>UI/blesslandx</uiIconPath>
        <description>Releases the druid's power infusing the land with fertility.</description>
        <manaCost>0.0</manaCost>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_DismissFertileLands</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_TM_SpawnThing</defaultProjectile>
            <abilityDef>TM_DismissFertileLands</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>10</SecondsToRecharge>
            <range>0</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_VibrationLow</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- Spell Mending -->	

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_SpellMending</defName>
        <label>Spell Mending</label>		
        <uiIconPath>UI/spellmending</uiIconPath>
        <description>Cast an enchantment upon a person that slowly reconstructs their equipment at a molecular level. Spell mending requires a the equipment to be worn in order to extract 'memories' from the wearer to perform the reconstruction. This places a physical strain on the affected pawn and will slow their physical activities. Spell mending dissipates after several hours.</description>
        <manaCost>0.50</manaCost>
		<learnItem>SpellOf_SpellMending</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_SpellMending</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_TM_SpawnThing</defaultProjectile>
            <abilityDef>TM_SpellMending</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>300</SecondsToRecharge>
            <range>40</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetThing</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
		<!-- Cauterize Wound -->	

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_CauterizeWound</defName>
        <label>Cauterize Wounds</label>
        <uiIconPath>UI/cauterizewound</uiIconPath>
        <description>The fire mage invokes elemental fire to instantly cauterize wounds on a patient. However, this process is likely to leave burn scars.</description>
        <manaCost>0.15</manaCost>
		<learnItem>SpellOf_CauterizeWound</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_CauterizeWound</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_TM_SpawnThing</defaultProjectile>
            <abilityDef>TM_CauterizeWound</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>60</SecondsToRecharge>
            <range>20</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetThing</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- Teach Magic & Might -->	

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_TeachMagic</defName>
        <label>Mentor Magic</label>
        <uiIconPath>UI/teachbook</uiIconPath>
        <description>Mentor a mage of lesser level to increase their magic skill. 
		
Mentored mages will gain class XP.  The amount of XP gained depends on the social status and difference in levels between the two mages.</description>
        <manaCost>0.25</manaCost>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_Teach</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_TM_SpawnThing</defaultProjectile>
            <abilityDef>TM_TeachMagic</abilityDef>
            <warmupTime>0</warmupTime>
            <SecondsToRecharge>1200</SecondsToRecharge>
            <range>50</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>Message_PositiveEvent</soundCast>
            <muzzleFlashScale>1</muzzleFlashScale>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
  <TorannMagic.TMAbilityDef ParentName="BaseMightAbility">
    <defName>TM_TeachMight</defName>
    <label>Combat Training</label>
    <uiIconPath>UI/teachbook</uiIconPath>
    <description>Train a fighter of lesser level to increase their combat skill. 
		
Trained fighters will gain class XP.  The amount of XP gained depends on the social status and difference in levels between the two fighters.</description>
    <staminaCost>0.25</staminaCost>
    <MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_Teach</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
		<abilityDef>TM_TeachMight</abilityDef>
		<isViolent>false</isViolent>
        <defaultProjectile>Projectile_Sustained</defaultProjectile>
        <warmupTime>0</warmupTime>
        <SecondsToRecharge>1200</SecondsToRecharge>
        <range>50</range>
        <soundCast>Message_PositiveEvent</soundCast>
        <muzzleFlashScale>1</muzzleFlashScale>
        <isPrimary>true</isPrimary>
		<AlwaysHits>true</AlwaysHits>
		<targetParams>
		  <canTargetPawns>true</canTargetPawns>
		  <canTargetBuildings>false</canTargetBuildings>
		  <canTargetSelf>false</canTargetSelf>
		  <canTargetLocations>false</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  <!-- blur -->	

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_Blur</defName>
        <label>Blur</label>
        <uiIconPath>UI/blur</uiIconPath>
        <description>Additional 20% chance to avoid all attacks by distorting light around the caster. Requires 20 mana to sustain and reduces mana regeneration by 10%. Re-use the ability to deactivate blur.</description>
        <manaCost>0</manaCost>
		<learnItem>SpellOf_Blur</learnItem>
		<upkeepEnergyCost>.20</upkeepEnergyCost>
		<upkeepRegenCost>.1</upkeepRegenCost>
		<abilityHediff>TM_BlurHD</abilityHediff>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_Blur</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_Blur</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>10</SecondsToRecharge>
            <range>0</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>ThrowGrenade</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	  <!-- blank mind -->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_BlankMind</defName>
        <label>Blank Mind</label>
        <uiIconPath>UI/blankmind</uiIconPath>
        <description>Wipes the memories of a pawn and breaks them out of any mental state but will induce a brief period of confusion as they gather their wits. When used on enemies, it will apply a mental freeze, stunning the enemy for a brief period.
		
AoE effects are only applied when the primary target is not a friendly pawn. Friendly pawns will lose both good and bad memories.</description>
		<manaCost>0.40</manaCost>
		<learnItem>SpellOf_BlankMind</learnItem>
        <MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_BlankMind</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_BlankMind</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>600.0</SecondsToRecharge>
            <range>28</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>20</muzzleFlashScale>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<AbilityTargetCategory>TargetAoE</AbilityTargetCategory>
            <TargetAoEProperties>
                <targetClass>Pawn</targetClass>
                <showRangeOnSelect>true</showRangeOnSelect>
                <friendlyFire>true</friendlyFire>
                <startsFromCaster>false</startsFromCaster>
                <maxTargets>4</maxTargets>
                <range>4</range>
            </TargetAoEProperties>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
  <!-- dirt devil -->	
	
	<ThingDef ParentName="TM_FlyingObjectBase" Class="AbilityUser.ProjectileDef_Ability">
		<thingClass>AbilityUser.Projectile_Ability</thingClass>
	    <defName>Projectile_DirtDevil</defName>
        <label>dirt devil</label>
        <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
        </graphicData>
        <projectile>
            <flyOverhead>true</flyOverhead>
            <damageDef>TM_Holy</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>30</speed>
        </projectile>
    </ThingDef>	
	
	<ThingDef ParentName="TM_FlyingObjectBase" Name="FlyingObject_DirtDevil">
	   <defName>FlyingObject_DirtDevil</defName>
	   <thingClass>TorannMagic.FlyingObject_DirtDevil</thingClass>
	   <label>flying object</label>
	   <graphicData>
			<texPath>Spells/invis</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
	   <projectile>
			<flyOverhead>true</flyOverhead>
			<damageDef>Stun</damageDef>
			<damageAmountBase>0</damageAmountBase>
			<speed>30</speed>
	   </projectile>
	</ThingDef>

	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_DirtDevil</defName>
        <label>Dirt Devil</label>
        <uiIconPath>UI/dirtdevil</uiIconPath>
        <description>Create a small vacuum of elemental air that seeks out and vaporizes dirt and debris.</description>
        <manaCost>0.35</manaCost>
		<learnItem>SpellOf_DirtDevil</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Effect_DirtDevil</verbClass>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_DirtDevil</defaultProjectile>
            <abilityDef>TM_DirtDevil</abilityDef>
            <AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
            <targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
            <warmupTime>0.5</warmupTime>
            <SecondsToRecharge>180.0</SecondsToRecharge>
            <range>0</range>
			<isViolent>false</isViolent>
            <burstShotCount>1</burstShotCount>
            <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
            <soundCast>TM_AirWoosh</soundCast>
            <muzzleFlashScale>0</muzzleFlashScale>
            <isPrimary>false</isPrimary>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_MechaniteReprogramming</defName>
        <label>Reprogram Mechanites</label>
        <uiIconPath>UI/mechanitereprogramming</uiIconPath>
        <description>Reprograms fibrous or sensory mechanites to harmonize with a hosts biological systems. The result will significantly reduce the strain on the host while the mechanites are active.</description>
        <manaCost>0.30</manaCost>
		<learnItem>SpellOf_MechaniteReprogramming</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_MechaniteReprogramming</verbClass>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_MechaniteReprogramming</abilityDef>
            <targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>300.0</SecondsToRecharge>
            <range>25</range>
			<isViolent>false</isViolent>
            <burstShotCount>1</burstShotCount>
            <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
            <soundCast>TM_Vibration</soundCast>
            <muzzleFlashScale>0</muzzleFlashScale>
            <isPrimary>false</isPrimary>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- Arcane Bolt -->
	
  <ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
    <defName>Projectile_ArcaneBolt</defName>
	<thingClass>TorannMagic.Projectile_ArcaneBolt</thingClass>
    <label>arcane bolt</label>
	<graphicData>
      <texPath>Spells/arcanebolt1</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <projectile>
	  <soundExplode>TM_SoftExplosion</soundExplode>
	  <flyOverhead>false</flyOverhead>
      <damageDef>TM_Arcane</damageDef>
      <damageAmountBase>8</damageAmountBase>
      <speed>55</speed>
	  <explosionRadius>1</explosionRadius>
	  <postExplosionSpawnChance>1</postExplosionSpawnChance>
    </projectile>
  </ThingDef>
  
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_ArcaneBolt</defName>
    <label>Arcane Bolt</label>
    <description>Launches a bolt of raw arcane energy. This ability will slowly grow in power based on the casters magic level.

Arcane Bolt is inefficient because of the unrefined nature of the spell, but it can be learned and cast by any mage capable of violence.</description>
	<uiIconPath>UI/arcanebolt</uiIconPath>
    <manaCost>0.25</manaCost>
	<learnItem>SpellOf_ArcaneBolt</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_ArcaneBolt</verbClass>
			<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>true</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>true</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_ArcaneBolt</defaultProjectile>
		<abilityDef>TM_ArcaneBolt</abilityDef>
        <warmupTime>1.25</warmupTime>
        <SecondsToRecharge>20</SecondsToRecharge>
        <range>35</range>
        <soundCast>TM_AirWooshLow</soundCast>
        <muzzleFlashScale>4</muzzleFlashScale>
        <isPrimary>false</isPrimary>
		<isViolent>true</isViolent>
		<burstShotCount>15</burstShotCount>
		<ticksBetweenBurstShots>1</ticksBetweenBurstShots>
		<forcedMissRadius>1</forcedMissRadius>
		<targetParams>
			<canTargetPawns>true</canTargetPawns>
			<canTargetBuildings>true</canTargetBuildings>
			<canTargetSelf>false</canTargetSelf>
			<canTargetLocations>true</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  <!-- Throwing Knife -->
  
    <ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
    <defName>Projectile_ThrowingKnife</defName>
	<thingClass>TorannMagic.Projectile_Spinning</thingClass>
    <label>Throwing Knife</label>
	<graphicData>
      <texPath>Spells/throwingknife</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <projectile>
	  <flyOverhead>false</flyOverhead>
      <damageDef>Cut</damageDef>
      <damageAmountBase>14</damageAmountBase>
      <speed>40</speed>
    </projectile>
  </ThingDef>
  
 <TorannMagic.TMAbilityDef ParentName="BaseMightAbility">
    <defName>TM_ThrowingKnife</defName>
    <label>Throwing Knife</label>
    <description>A ranged attack using a concealed throwing knife, designed to complement any equipped weapon system.</description>
	<uiIconPath>UI/throwingknife</uiIconPath>
    <staminaCost>0.30</staminaCost>
	<learnItem>SkillOf_ThrowingKnife</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_SB</verbClass>
			<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>true</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>true</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_ThrowingKnife</defaultProjectile>
		<abilityDef>TM_ThrowingKnife</abilityDef>
        <warmupTime>.75</warmupTime>
        <SecondsToRecharge>60</SecondsToRecharge>
        <range>40</range>
        <soundCast>TM_Woosh</soundCast>
		<soundCastTail>GunTail_Heavy</soundCastTail>
        <muzzleFlashScale>0</muzzleFlashScale>
        <isPrimary>true</isPrimary>
		<isViolent>true</isViolent>
		<burstShotCount>1</burstShotCount>
		<targetParams>
			<canTargetPawns>true</canTargetPawns>
			<canTargetBuildings>false</canTargetBuildings>
			<canTargetSelf>false</canTargetSelf>
			<canTargetLocations>false</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  <!-- Pommel Strike -->
  
 <TorannMagic.TMAbilityDef ParentName="BaseMightAbility">
    <defName>TM_PommelStrike</defName>
    <label>Pommel Strike</label>
    <description>A melee attack that delivers a non-lethal blow dealing minor damage and stunning the target for a short period. 
	
This ability can instantly down a target pawn; the more pain the target is in, the more likely the blow will knock down the target instead of stun.

Autocast only triggers when the target has 80% or greater chance of being downed from this attack.</description>
	<uiIconPath>UI/pommelstrike</uiIconPath>
    <staminaCost>0.30</staminaCost>
	<learnItem>SkillOf_PommelStrike</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_PommelStrike</verbClass>
			<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>true</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>true</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Default</defaultProjectile>
		<abilityDef>TM_PommelStrike</abilityDef>
        <warmupTime>.25</warmupTime>
        <SecondsToRecharge>30</SecondsToRecharge>
        <range>1.42</range>
        <soundCast>MeleeHit_Wood</soundCast>
        <muzzleFlashScale>0</muzzleFlashScale>
        <isPrimary>true</isPrimary>
		<isViolent>true</isViolent>
		<burstShotCount>1</burstShotCount>
		<targetParams>
			<canTargetPawns>true</canTargetPawns>
			<canTargetBuildings>false</canTargetBuildings>
			<canTargetSelf>false</canTargetSelf>
			<canTargetLocations>false</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  <!-- Lightning Trap -->
  <ThingDef ParentName="BaseBullet" Name="FlyingObject_LightningTrap">
	   <defName>FlyingObject_LightningTrap</defName>
	   <thingClass>TorannMagic.FlyingObject_LightningTrap</thingClass>
	   <label>lightning</label>
	   <graphicData>
			<texPath>Spells/eyeofthestorm</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<shaderType>TransparentPostLight</shaderType>
			<drawSize>(.25, .25)</drawSize>
        </graphicData>
        <projectile>
            <flyOverhead>true</flyOverhead>
            <damageDef>TM_Holy</damageDef>
            <damageAmountBase>0</damageAmountBase>
            <speed>10</speed>
        </projectile>
	</ThingDef>
  
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_LightningTrap</defName>
    <label>Lightning Trap</label>
    <description>Elemental lightning is charged inside a hardened arcane shell and placed as a trap. Arcane strands that activate the spell are extended around the trap and trigger when disturbed by enemies. Traps last indefinitely, but a mage is only able to sustain a single trap.</description>
	<uiIconPath>UI/lightningtrap</uiIconPath>
    <manaCost>0.40</manaCost>
	<learnItem>SpellOf_LightningTrap</learnItem>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_LightningTrap</verbClass>
			<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>true</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>true</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Default</defaultProjectile>
		<abilityDef>TM_LightningTrap</abilityDef>
        <warmupTime>0</warmupTime>
        <SecondsToRecharge>15</SecondsToRecharge>
        <range>70</range>
        <soundCast>MeleeHit_Metal_Sharp</soundCast>
        <muzzleFlashScale>0</muzzleFlashScale>
        <isPrimary>false</isPrimary>
		<isViolent>true</isViolent>
		<burstShotCount>1</burstShotCount>
		<ticksBetweenBurstShots>1</ticksBetweenBurstShots>
		<targetParams>
			<canTargetPawns>false</canTargetPawns>
			<canTargetBuildings>false</canTargetBuildings>
			<canTargetSelf>false</canTargetSelf>
			<canTargetLocations>true</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_DismissLightningTrap</defName>
    <label>Dismiss Lightning Trap</label>
    <uiIconPath>UI/dismisslightningtrap</uiIconPath>
    <description>Dismisses a lightning trap</description>
    <manaCost>0.0</manaCost>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_DismissLightningTrap</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Default</defaultProjectile>
		<abilityDef>TM_DismissLightningTrap</abilityDef>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>4</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>0</range>
		<isViolent>false</isViolent>
        <soundCast>Message_PositiveEvent</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
        <isPrimary>false</isPrimary>
		<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		<targetParams>
      	 <canTargetPawns>true</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>true</canTargetSelf>
		 <canTargetLocations>false</canTargetLocations>
        </targetParams>
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <!-- invisibility -->	

    <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_Invisibility</defName>
        <label>Invisibility</label>
        <uiIconPath>UI/invisibility</uiIconPath>
        <description>Become invisible for 20 seconds. Any overt interaction will immediately break the spell. Clears caster from all hostile targeting.</description>
        <manaCost>0.25</manaCost>
		<learnItem>SpellOf_Invisibility</learnItem>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_Invisibility</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_Invisibility</abilityDef>
            <warmupTime>.5</warmupTime>
            <SecondsToRecharge>300</SecondsToRecharge>
            <range>0</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>4</muzzleFlashScale>
			<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		    <AlwaysHits>true</AlwaysHits>
            <isPrimary>true</isPrimary>
			<isViolent>false</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- briar patch -->
	
  <ThingDef Class="AbilityUser.ProjectileDef_Ability" ParentName="BaseBullet">
    <defName>Projectile_BriarPatch</defName>
	<thingClass>AbilityUser.Projectile_Ability</thingClass>
    <label>briar patch</label>
	<graphicData>
      <texPath>Spells/invis</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <projectile>
	  <flyOverhead>true</flyOverhead>
      <damageDef>TM_Arcane</damageDef>
      <damageAmountBase>0</damageAmountBase>
      <speed>999</speed>
	  <explosionRadius>6</explosionRadius>
	  <postExplosionSpawnChance>1</postExplosionSpawnChance>
    </projectile>
  </ThingDef>
  
 <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_BriarPatch</defName>
    <label>Briar Patch</label>
    <description>Creates a hazard made of thorny vines. Any movement over the affected area will be slowed, and creatures moving through the briar patch may take minor damage.</description>
	<uiIconPath>UI/briarpatch</uiIconPath>
    <manaCost>0.35</manaCost>
	<learnItem>SpellOf_BriarPatch</learnItem>	
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_BriarPatch</verbClass>
			<tooltipShowProjectileDamage>true</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>true</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>true</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_BriarPatch</defaultProjectile>
		<abilityDef>TM_BriarPatch</abilityDef>
        <warmupTime>2</warmupTime>
        <SecondsToRecharge>300</SecondsToRecharge>
        <range>60</range>
        <soundCast>TM_VibrationLow</soundCast>
        <muzzleFlashScale>4</muzzleFlashScale>
        <isPrimary>false</isPrimary>
		<isViolent>false</isViolent>
		<burstShotCount>1</burstShotCount>
		<ticksBetweenBurstShots>1</ticksBetweenBurstShots>
		<targetParams>
			<canTargetPawns>false</canTargetPawns>
			<canTargetBuildings>false</canTargetBuildings>
			<canTargetSelf>false</canTargetSelf>
			<canTargetLocations>true</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  	<!-- Magelight -->
  
   <TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
    <defName>TM_MageLight</defName>
    <label>Magelight</label>
    <uiIconPath>Other/magelight</uiIconPath>
    <description>Creates a small orb of light that banishes the darkness. Magelight will remain in the proximity of the casting mage. This spell has an upkeep cost of 10 mana and 5% mana regen.

Magelight grants a 20% vision bonus; only the caster benefits from this bonus.

Magelight can be dispelled by using this ability on the caster.</description>
    <manaCost>0</manaCost>
	<learnItem>SpellOf_MageLight</learnItem>
	<upkeepEnergyCost>.1</upkeepEnergyCost>
	<upkeepRegenCost>.05</upkeepRegenCost>
	<abilityHediff>TM_MageLightHD</abilityHediff>
	<MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_MageLight</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Projectile_Default</defaultProjectile>
		<abilityDef>TM_MageLight</abilityDef>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>10</SecondsToRecharge>
		<burstShotCount>1</burstShotCount>
        <range>0</range>
		<isViolent>false</isViolent>
        <soundCast>ThrowGrenade</soundCast>
        <muzzleFlashScale>40</muzzleFlashScale>
		<AlwaysHits>true</AlwaysHits>
         <isPrimary>false</isPrimary>
		 <AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
		 <targetParams>
      	 <canTargetPawns>true</canTargetPawns>
      	 <canTargetBuildings>false</canTargetBuildings>
      	 <canTargetSelf>true</canTargetSelf>
		 <canTargetLocations>true</canTargetLocations>
        </targetParams>		
    </MainVerb>
 </TorannMagic.TMAbilityDef>
 
 <!-- Legion start-->
 
 <TorannMagic.TMAbilityDef ParentName="BaseMightAbility">
    <defName>TM_Legion</defName>
    <label>Legion</label>
    <uiIconPath>UI/legion</uiIconPath>
    <description>Copy an ability from another fighter. All bonuses and restrictions of the copied ability apply. Only one ability may be stored at a time.</description>
<!--    <thingClass>ThingWithComps</thingClass> -->
    <staminaCost>0.3</staminaCost>
	<learnItem>SkillOf_Legion</learnItem>
    <MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_Legion</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
		<abilityDef>TM_Legion</abilityDef>
		<isViolent>false</isViolent>
		<AlwaysHits>true</AlwaysHits>
        <defaultProjectile>Projectile_Default</defaultProjectile>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>120</SecondsToRecharge>
        <range>50</range>
        <soundCast>TM_Vibration</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
        <isPrimary>false</isPrimary>
		<targetParams>
		  <canTargetPawns>true</canTargetPawns>
		  <canTargetBuildings>false</canTargetBuildings>
		  <canTargetSelf>false</canTargetSelf>
		  <canTargetLocations>false</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
   <!-- Tempest Strike -->
   
 <ThingDef ParentName="BaseBullet" Class="AbilityUser.ProjectileDef_Ability">
   <defName>Projectile_TempestStrike</defName>
   <thingClass>TorannMagic.Projectile_TempestStrike</thingClass>
   <label>Tempest strike</label>
   <graphicData>
		<texPath>Spells/Moon_Edge</texPath>
		<graphicClass>Graphic_Single</graphicClass>
   </graphicData>
   <projectile>
		<flyOverhead>false</flyOverhead>
		<damageDef>Cut</damageDef>
		<damageAmountBase>8</damageAmountBase>
		<speed>50</speed>
   </projectile>
 </ThingDef>
 
 <TorannMagic.TMAbilityDef ParentName="BaseMightAbility">
    <defName>TM_TempestStrike</defName>
    <label>Tempest Strike</label>
    <uiIconPath>UI/tempeststrike</uiIconPath>
    <description>Launch multiple attacks in rapid succession. Each attack consumes 20 stamina. Tempest Strike will end when the fighter has insufficient stamina or after 5 attacks.
	
Melee weapons generate blades of energy.
	
This attack only works when the weapon equipped is not normally consumed after use.</description>
<!--    <thingClass>ThingWithComps</thingClass> -->
    <staminaCost>0.2</staminaCost>
	<learnItem>SkillOf_TempestStrike</learnItem>
	<weaponDamageFactor>.40</weaponDamageFactor>
    <MainVerb Class="AbilityUser.VerbProperties_Ability">
        <verbClass>TorannMagic.Verb_TempestStrike</verbClass>
			<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
			<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
			<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
			<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
        <hasStandardCommand>true</hasStandardCommand>
		<abilityDef>TM_TempestStrike</abilityDef>
		<isViolent>true</isViolent>
		<AlwaysHits>true</AlwaysHits>
        <defaultProjectile>Projectile_TempestStrike</defaultProjectile>
        <warmupTime>1</warmupTime>
        <SecondsToRecharge>120</SecondsToRecharge>
        <range>30</range>
        <soundCast>TM_Vibration</soundCast>
        <muzzleFlashScale>20</muzzleFlashScale>
        <isPrimary>false</isPrimary>
		<burstShotCount>5</burstShotCount>
		<ticksBetweenBurstShots>12</ticksBetweenBurstShots>
		<targetParams>
		  <canTargetPawns>true</canTargetPawns>
		  <canTargetBuildings>true</canTargetBuildings>
		  <canTargetSelf>false</canTargetSelf>
		  <canTargetLocations>false</canTargetLocations>
		</targetParams>
    </MainVerb>
  </TorannMagic.TMAbilityDef>
  
  <!-- ignite-->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_Ignite</defName>
        <label>Ignite</label>
        <uiIconPath>UI/ignite</uiIconPath>
        <description>Concentrates and enormous amount of heat at a focus point and then releases it. The released heat can ignite nearby creatures and will always set fire to corpses. The released heat will also dramatically increase the room temperature for any enclosed area.</description>
		<manaCost>0.30</manaCost>
		<learnItem>SpellOf_Ignite</learnItem>
        <MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_Ignite</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>true</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_Ignite</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>60.0</SecondsToRecharge>
            <range>35</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>25</muzzleFlashScale>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<AbilityTargetCategory>TargetAoE</AbilityTargetCategory>
            <TargetAoEProperties>
                <targetClass>Pawn</targetClass>
                <showRangeOnSelect>true</showRangeOnSelect>
                <friendlyFire>true</friendlyFire>
                <startsFromCaster>false</startsFromCaster>
                <maxTargets>20</maxTargets>
                <range>5</range>
            </TargetAoEProperties>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	  <!-- snap freeze -->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_SnapFreeze</defName>
        <label>Snap Freeze</label>
        <uiIconPath>UI/snapfreeze</uiIconPath>
        <description>Removes almost all heat at a focus point causing a snap freeze of any living object. Creatures may suffer from frostbite and most plant life will die. The removal of heat will also dramatically decrease the room temperature for any enclosed area.</description>
		<manaCost>0.30</manaCost>
		<learnItem>SpellOf_SnapFreeze</learnItem>
        <MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_SnapFreeze</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>true</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_SnapFreeze</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>60.0</SecondsToRecharge>
            <range>35</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>25</muzzleFlashScale>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<AbilityTargetCategory>TargetAoE</AbilityTargetCategory>
            <TargetAoEProperties>
                <targetClass>Pawn</targetClass>
                <showRangeOnSelect>true</showRangeOnSelect>
                <friendlyFire>true</friendlyFire>
                <startsFromCaster>false</startsFromCaster>
                <maxTargets>20</maxTargets>
                <range>5</range>
            </TargetAoEProperties>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	
	  <!-- discord -->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_Discord</defName>
        <label>Discord</label>
        <uiIconPath>UI/discordance</uiIconPath>
        <description>A channeled ability that continually assaults the senses of the victim with random and jarring signals. This sensory overload will gradually weaken mental stability and eventually the mental harmony of the target will collapse altogether. The results of this ability vary, but will grow stronger with each iteration. 
		
Effects include dizziness, nausea, vision and hearing loss, vomiting, inability to determine friend from foe, can no longer maths, dislike of other pawns, loss of motor skills, loss of reason, urge to discuss politics, paroxysm, brain hemorrhaging and cranial detonation. Results may vary when targeting friendly pawns. Consult your therapist channel before using.</description>
		<manaCost>0.02</manaCost>
		<learnItem>SpellOf_Discord</learnItem>
        <MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_Discord</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_Discord</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>60.0</SecondsToRecharge>
            <range>40</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>2</muzzleFlashScale>
            <isPrimary>false</isPrimary>
			<isViolent>true</isViolent>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>false</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- magic warddrobe -->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_MagicWardrobe</defName>
        <label>Magic Wardrobe</label>
        <uiIconPath>UI/magicwardrobe</uiIconPath>
        <description>A simple ability that stores all equipped clothing in a dimensional pocket. When used again, the stored clothing becomes equipped and any current equipment becomes stored. Works for all apparel, but not weapons or held items. Useful for storing gear or for quickly swapping between equipment sets.</description>
		<manaCost>0.15</manaCost>
		<learnItem>SpellOf_MagicWardrobe</learnItem>
        <MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_MagicWardrobe</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>false</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_MagicWardrobe</abilityDef>
            <warmupTime>3</warmupTime>
            <SecondsToRecharge>60.0</SecondsToRecharge>
            <range>0</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>5</muzzleFlashScale>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>false</canTargetLocations>
            </targetParams>
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- heat shield -->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_HeatShield</defName>
        <label>Heat Shield</label>
        <uiIconPath>UI/heatshield</uiIconPath>
        <description>Place a heat barrier on allies that provides 75% bonus protection against heat damage and prevents catching on fire. Effects up to 6 targets and lasts about 30 seconds.</description>
		<manaCost>0.30</manaCost>
		<learnItem>SpellOf_HeatShield</learnItem>
        <MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_HeatShield</verbClass>
				<tooltipShowProjectileDamage>false</tooltipShowProjectileDamage>
				<tooltipShowExtraDamages>false</tooltipShowExtraDamages>
				<tooltipShowHediffsToApply>false</tooltipShowHediffsToApply>
				<tooltipShowMentalStatesToApply>false</tooltipShowMentalStatesToApply>
            <hasStandardCommand>true</hasStandardCommand>
			<requiresLineOfSight>true</requiresLineOfSight>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_HeatShield</abilityDef>
            <warmupTime>2</warmupTime>
            <SecondsToRecharge>300.0</SecondsToRecharge>
            <range>30</range>
            <burstShotCount>1</burstShotCount>
            <soundCast>TM_Vibration</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
            <muzzleFlashScale>5</muzzleFlashScale>
            <isPrimary>false</isPrimary>
			<isViolent>false</isViolent>
			<AbilityTargetCategory>TargetAoE</AbilityTargetCategory>
			<TargetAoEProperties>
                <targetClass>Pawn</targetClass>
                <showRangeOnSelect>true</showRangeOnSelect>
                <friendlyFire>true</friendlyFire>
                <startsFromCaster>false</startsFromCaster>                
                <range>6</range>
            </TargetAoEProperties>			
			<targetParams>
                <canTargetPawns>true</canTargetPawns>
                <canTargetBuildings>false</canTargetBuildings>
                <canTargetSelf>true</canTargetSelf>
                <canTargetLocations>true</canTargetLocations>
            </targetParams>			
        </MainVerb>
    </TorannMagic.TMAbilityDef>
	
	<!-- alter storm -->	
	
	<TorannMagic.TMAbilityDef ParentName="BaseMagicAbility">
        <defName>TM_AlterStorm</defName>
        <label>Alter Storm</label>
        <uiIconPath>UI/alterstorm</uiIconPath>
        <description>Alters the weather to create new conditions. Rainy storms will be changed to healing rain. Snow will be changed to a hailstorm. The hailstorm can be partially controlled by directing the hail towards enemies on the map, but once this weather even is started it must run its course and cannot be influenced by rainmaker.</description>
        <manaCost>0.40</manaCost>
		<efficiencyReductionPercent>.10</efficiencyReductionPercent>
		<learnItem>SpellOf_AlterStorm</learnItem>
		<learnChance>0</learnChance>
		<canCopy>true</canCopy>
		<MainVerb Class="AbilityUser.VerbProperties_Ability">
            <verbClass>TorannMagic.Verb_AlterStorm</verbClass>
            <hasStandardCommand>true</hasStandardCommand>
            <defaultProjectile>Projectile_Default</defaultProjectile>
            <abilityDef>TM_AlterStorm</abilityDef>
			<requiresLineOfSight>false</requiresLineOfSight>
            <AbilityTargetCategory>TargetSelf</AbilityTargetCategory>
            <targetParams>
			  <canTargetPawns>true</canTargetPawns>
			  <canTargetBuildings>false</canTargetBuildings>
			  <canTargetSelf>true</canTargetSelf>
			  <canTargetLocations>false</canTargetLocations>
			</targetParams>
            <warmupTime>5</warmupTime>
            <SecondsToRecharge>600</SecondsToRecharge>
            <range>0</range>
			<isViolent>false</isViolent>
            <burstShotCount>1</burstShotCount>
            <ticksBetweenBurstShots>1</ticksBetweenBurstShots>
            <soundCast>Message_PositiveEvent</soundCast>
            <muzzleFlashScale>20</muzzleFlashScale>
            <isPrimary>false</isPrimary>
        </MainVerb>
    </TorannMagic.TMAbilityDef>

</Defs>